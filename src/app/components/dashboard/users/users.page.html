<div class="view">
  <ion-button (click)="showToAdd()" id="open-modal" size="full" color="light">Agregar</ion-button>
  <ion-modal trigger="open-modal" (willDismiss)="onWillDismiss($event)">
    <ng-template class="modal-form">
      <ion-header>
        <ion-toolbar color="light">
          <ion-item color="light">
            <ion-icon (click)="cancel()" aria-hidden="true" slot="start" [ios]="'arrow-back-outline'" [md]="'arrow-back-sharp'"></ion-icon>
            <ion-title>{{formAction}}</ion-title>
          </ion-item>
        </ion-toolbar>
      </ion-header>
      <form #formToSend [formGroup]="formGroup" class="form">
        <ion-card class="card-form" size="full" color="dark">
          <h3 class="title-form">{{sectionTitle}}</h3>
          <ion-item color="dark">
            <ion-input name="dni" label="Cédula" labelPlacement="floating" formControlName="dni" (input)="detectChange($event, 'dni')"></ion-input>
          </ion-item>
          <ion-note *ngIf="errors['dni'] !== ''" class="error-msg" color="danger">{{errors['dni']}}</ion-note>
          <ion-item color="dark">
            <ion-input name="name" label="Nombre" labelPlacement="floating" formControlName="name" (input)="detectChange($event, 'name')"></ion-input>
          </ion-item>
          <ion-note *ngIf="errors['name'] !== ''" class="error-msg" color="danger">{{errors['name']}}</ion-note>
          <ion-item color="dark">
            <ion-input name="lastname" label="Apellido" labelPlacement="floating" formControlName="lastname" (input)="detectChange($event, 'lastname')"></ion-input>
          </ion-item>
          <ion-note *ngIf="errors['lastname'] !== ''" class="error-msg" color="danger">{{errors['lastname']}}</ion-note>
          <ion-item color="dark">
            <ion-input name="telephone" label="Teléfono" labelPlacement="floating" formControlName="telephone" (input)="detectChange($event, 'telephone')"></ion-input>
          </ion-item>
          <ion-note *ngIf="errors['telephone'] !== ''" class="error-msg" color="danger">{{errors['telephone']}}</ion-note>
          <ion-item color="dark">
            <ion-input type="email" name="email" label="Email" labelPlacement="floating" formControlName="email" (input)="detectChange($event, 'email')"></ion-input>
          </ion-item>
          <ion-note *ngIf="errors['email'] !== ''" class="error-msg" color="danger">{{errors['email']}}</ion-note>
          <ion-item color="dark">
            <ion-select label="Rol" formControlName="role">
              <ion-select-option *ngFor="let role of roles" value="{{role.id}}">{{role.role}}</ion-select-option>
            </ion-select>
          </ion-item>
          <ion-note *ngIf="errors['role'] !== ''" class="error-msg" color="danger">{{errors['role']}}</ion-note>

          <!--Datos para acceso-->
          <ion-item color="dark">
            <ion-input name="username" label="Usuario" labelPlacement="floating" formControlName="username" (input)="detectChange($event, 'usernmae')"></ion-input>
          </ion-item>
          <ion-note *ngIf="errors['username'] !== ''" class="error-msg" color="danger">{{errors['username']}}</ion-note>
          <ion-item color="dark">
            <ion-textarea name="password" label="Contraseña" labelPlacement="floating" formControlName="password" (input)="detectChange($event, 'password')"></ion-textarea>
          </ion-item>
          <ion-note *ngIf="errors['password'] !== ''" class="error-msg" color="danger">{{errors['password']}}</ion-note>
          <ion-item color="dark">
            <ion-textarea name="verifyPassword" label="Contraseña" labelPlacement="floating" (input)="detectChange($event, 'password')"></ion-textarea>
          </ion-item>
          <ion-note *ngIf="errors['verifyPassword'] !== ''" class="error-msg" color="danger">{{errors['verifyPassword']}}</ion-note>
          <ion-button class="mt" id="present-alert" size="full">Guardar</ion-button>
          <ion-note *ngIf="errors['result'] !== ''" class="error-msg" color="danger">{{errors['result']}}</ion-note>
        </ion-card>
      </form>
      <ion-alert trigger="present-alert" class="custom-alert" header="¿Deseas guardar el registro?" [buttons]="alertButtons"></ion-alert>
    </ng-template>
  </ion-modal>
  <app-table-common
    [theads]="theads"
    [fields]="fields"
    [path]="pathLoad"
    [pathFilter]="pathFilter"
    [images]="images"
    [pathImages]="pathImages"
    (prepareFormToUpdate)="showUpdate($event)"
    (prepareToDelete)="showDelete($event)"
  ></app-table-common>
</div>

